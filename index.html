<html>
<head>
  <link rel="stylesheet" href="./styles.css">
  <meta name="viewport" content="width=device-width, user-scalable=no" />
</head>
<body>
  <div class="container">
    <div class="topRow">
      <label>
        <svg class="icon" viewBox="0 0 24 24">
          <rect fill="none" height="24" width="24"/>
          <path d="M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"/>
        </svg>
        <input id="numColumnsInput" inputmode="decimal" min="1" max="100" placeholder="Number of columns" type="number" value="24" />
      </label>
      <label>
        <svg class="icon" viewBox="0 0 24 24">
          <rect fill="none" height="24" width="24"/>
          <path d="M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"/>
        </svg>
        <input id="numRowsInput" inputmode="decimal" min="1" max="100" placeholder="Number of rows" type="number" value="12" />
      </label>
      <label>
        <svg class="icon" viewBox="0 0 24 24">
          <rect fill="none" height="24" width="24"/>
          <path d="M7.5,11C9.43,11,11,9.43,11,7.5S9.43,4,7.5,4S4,5.57,4,7.5S5.57,11,7.5,11z M7.5,6C8.33,6,9,6.67,9,7.5S8.33,9,7.5,9 S6,8.33,6,7.5S6.67,6,7.5,6z"/>
          <rect height="2" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -4.9706 12)" width="20.63" x="1.69" y="11"/>
          <path d="M16.5,13c-1.93,0-3.5,1.57-3.5,3.5s1.57,3.5,3.5,3.5s3.5-1.57,3.5-3.5S18.43,13,16.5,13z M16.5,18 c-0.83,0-1.5-0.67-1.5-1.5s0.67-1.5,1.5-1.5s1.5,0.67,1.5,1.5S17.33,18,16.5,18z"/>
        </svg>
        <input id="densityInput" inputmode="decimal" min="1" max="100" placeholder="Cell density" type="number" value="25" />
      </label>
      <button id="restartButton" title="Restart">
        <svg class="icon" viewBox="0 0 24 24">
          <rect fill="none" height="24" width="24"/>
          <path d="M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"></path>
        </svg>
      </button>
    </div>
    <canvas id="canvas"></canvas>
    <div class="bottomRow">
      <div class="statusColumnLeft">
        <span id="loopIndex">1</span><span id="maxLoopIndex">/10</span>
      </div>
      <div class="statusColumnMiddle"><span id="liveCell">&nbsp;</span> <span id="numLiveCells"></span></div>
      <div class="statusColumnRight"><span id="dyingCell">&nbsp;</span> <span id="numDyingCells"></span></div>
    </div>
  </div>
  <script src="./game-browser.js"></script>
  <script>
    const numColumnsInput = document.getElementById('numColumnsInput');
    const numRowsInput = document.getElementById('numRowsInput');
    const densityInput = document.getElementById('densityInput');
    const restartButton = document.getElementById('restartButton');

    function restart() {
      const numColumns = parseInt(numColumnsInput.value);
      const numRows = parseInt(numRowsInput.value);
      const density = parseInt(densityInput.value) / 100;

      initialize(numColumns, numRows, density);
    }

    restartButton.addEventListener('click', restart);

    function restartOnEnter(event) {
      switch (event.key) {
        case "Enter": {
          restart();
          break;
        }
      }
    }

    numColumnsInput.addEventListener('keydown', restartOnEnter);
    numRowsInput.addEventListener('keydown', restartOnEnter);
    densityInput.addEventListener('keydown', restartOnEnter);

    restart();
  </script>
</body>
</html>